# 프로세스와 스레드

## 학습 목표

- [ ] 프로세스와 스레드의 차이를 설명할 수 있다
- [ ] 멀티 프로세스 vs 멀티 스레드 선택 기준을 제시할 수 있다
- [ ] 동시성과 병렬성의 차이를 이해한다

---

## 1. 프로세스 (Process)

### 정의
프로세스는 **실행 중인 프로그램**으로, 운영체제로부터 자원을 할당받는 작업의 단위이다.

### 프로세스 메모리 구조

```
┌─────────────────┐
│      Stack      │  ← 지역 변수, 함수 호출 정보
├─────────────────┤
│        ↓        │
│                 │
│        ↑        │
├─────────────────┤
│       Heap      │  ← 동적 할당 메모리
├─────────────────┤
│       Data      │  ← 전역 변수, 정적 변수
├─────────────────┤
│       Code      │  ← 실행할 코드
└─────────────────┘
```

### 특징
- 각 프로세스는 **독립적인 메모리 공간**을 가짐
- 프로세스 간 통신(IPC)이 필요 (파이프, 소켓, 공유 메모리 등)
- 하나의 프로세스가 죽어도 다른 프로세스에 영향 없음

---

## 2. 스레드 (Thread)

### 정의
스레드는 프로세스 내에서 **실행의 단위**이다. 하나의 프로세스는 여러 스레드를 가질 수 있다.

### 스레드 메모리 구조

```
프로세스
┌─────────────────────────────────────┐
│  Code  │  Data  │  Heap (공유)      │
├─────────────────────────────────────┤
│ Stack1 │ Stack2 │ Stack3  (독립)    │
│ (T1)   │ (T2)   │ (T3)              │
└─────────────────────────────────────┘
```

### 특징
- **Code, Data, Heap** 영역을 공유
- **Stack**만 독립적으로 할당
- 공유 자원으로 인한 동기화 이슈 발생 가능

---

## 3. 프로세스 vs 스레드 비교

| 구분 | 프로세스 | 스레드 |
|------|----------|--------|
| 정의 | 자원 할당의 단위 | 실행의 단위 |
| 메모리 | 독립적 공간 | Code/Data/Heap 공유 |
| 통신 | IPC 필요 (비용 높음) | 공유 메모리 (비용 낮음) |
| 컨텍스트 스위칭 | 비용 높음 | 비용 낮음 |
| 안정성 | 높음 (독립적) | 낮음 (하나 죽으면 전체 영향) |
| 생성 시간 | 느림 | 빠름 |

---

## 4. 동시성 vs 병렬성

### 동시성 (Concurrency)
- 여러 작업이 **번갈아가며** 실행되는 것처럼 보이는 것
- 단일 코어에서도 가능 (시분할)

### 병렬성 (Parallelism)
- 여러 작업이 **실제로 동시에** 실행되는 것
- 멀티 코어 필요

```
동시성 (단일 코어)
T1: ████░░░░████░░░░████
T2: ░░░░████░░░░████░░░░
    ────────────────────→ 시간

병렬성 (멀티 코어)
Core1: ████████████████████
Core2: ████████████████████
       ────────────────────→ 시간
```

---

## 5. 실무 적용 사례

### 멀티 프로세스 선택
- **크롬 브라우저**: 탭마다 독립 프로세스 (안정성)
- **PHP-FPM**: 요청당 프로세스 (격리)

### 멀티 스레드 선택
- **Java Spring**: 스레드 풀 활용 (성능)
- **Node.js Worker Threads**: CPU 집약적 작업 분리

---

## 연관 개념

- [컨텍스트 스위칭](./03-context-switching.md)
- [교착 상태와 경쟁 상태](./04-deadlock-race-condition.md)
